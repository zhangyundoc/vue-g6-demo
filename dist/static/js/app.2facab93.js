(function(t){function e(e){for(var a,s,r=e[0],d=e[1],c=e[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(t[a]=d[a]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var d=n[r];0!==i[d]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var l=d;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0228":function(t,e,n){"use strict";var a=n("1117"),i=n.n(a);i.a},"034f":function(t,e,n){"use strict";var a=n("64a9"),i=n.n(a);i.a},1117:function(t,e,n){},2520:function(t,e,n){},"2e0d":function(t,e,n){"use strict";var a=n("c6d2"),i=n.n(a);i.a},"358f":function(t,e,n){},4744:function(t,e,n){"use strict";var a=n("2520"),i=n.n(a);i.a},"49e1":function(t,e,n){},"528c":function(t,e,n){"use strict";var a=n("49e1"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o=(n("034f"),n("2877")),s={},r=Object(o["a"])(s,a,i,!1,null,null,null),d=r.exports,c=n("2b0e"),l=n("8c4f"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("G6Editor",{attrs:{mode:"edit"}})},h=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{width:t.width},attrs:{id:"mountNode"}},[n("div",{staticClass:"editor"},[n("context-menu"),t._v(" "),n("toolbar"),t._v(" "),n("div",{staticStyle:{height:"42px"}}),t._v(" "),n("div",{staticClass:"bottom-container"},[n("item-panel"),t._v(" "),n("detail-panel"),t._v(" "),n("minimap"),t._v(" "),n("page",{attrs:{height:t.height,width:t.width,data:t.data}})],1)],1),t._v(" "),n("Flow")],1)},p=[],g=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbar"},[n("link",{attrs:{rel:"stylesheet",type:"text/css",href:"//at.alicdn.com/t/font_598462_3xve1872wizzolxr.css"}}),t._v(" "),n("i",{staticClass:"command iconfont icon-undo",class:t.undoList.length>0?"":"disable",attrs:{title:"撤销"},on:{click:t.handleUndo}}),t._v(" "),n("i",{staticClass:"command iconfont icon-redo",class:t.redoList.length>0?"":"disable",attrs:{title:"重做"},on:{click:t.handleRedo}}),t._v(" "),n("span",{staticClass:"separator"}),t._v(" "),n("i",{staticClass:"command iconfont icon-delete-o",class:t.selectedItem?"":"disable",attrs:{"data-command":"delete",title:"删除"},on:{click:t.handleDelete}}),t._v(" "),n("span",{staticClass:"separator"}),t._v(" "),n("i",{staticClass:"command iconfont icon-zoom-in-o",attrs:{"data-command":"zoomIn",title:"放大"},on:{click:t.handleZoomIn}}),t._v(" "),n("i",{staticClass:"command iconfont icon-zoom-out-o",attrs:{"data-command":"zoomOut",title:"缩小"},on:{click:t.handleZoomOut}}),t._v(" "),n("i",{staticClass:"command iconfont icon-fit",attrs:{"data-command":"autoZoom",title:"适应画布"},on:{click:t.handleAutoZoom}}),t._v(" "),n("i",{staticClass:"command iconfont icon-actual-size-o",attrs:{"data-command":"resetZoom",title:"实际尺寸"},on:{click:t.handleResetZoom}}),t._v(" "),n("span",{staticClass:"separator"}),t._v(" "),n("i",{staticClass:"command iconfont icon-to-back",class:t.selectedItem?"":"disable",attrs:{"data-command":"toBack",title:"层级后置"},on:{click:t.handleToBack}}),t._v(" "),n("i",{staticClass:"command iconfont icon-to-front",class:t.selectedItem?"":"disable",attrs:{"data-command":"toFront",title:"层级前置"},on:{click:t.handleToFront}}),t._v(" "),n("span",{staticClass:"separator"}),t._v(" "),n("span",{staticClass:"separator"}),t._v(" "),n("i",{staticClass:"command iconfont icon-select",class:t.multiSelect?"disable":"",attrs:{"data-command":"multiSelect",title:"多选"},on:{click:t.handleMuiltSelect}}),t._v(" "),n("i",{staticClass:"command iconfont icon-group",class:t.addGroup?"":"disable",attrs:{"data-command":"addGroup",title:"成组"},on:{click:t.handleAddGroup}}),t._v(" "),n("i",{staticClass:"command iconfont icon-ungroup disable",attrs:{"data-command":"unGroup",title:"解组"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.consoleData}},[t._v("控制台输出数据")])],1)}),m=[],v=(n("ac6a"),n("75fc")),y=new c["default"],b=n("30d1"),x=n.n(b),k=(n("456d"),n("42454"),n("2593"),n("98dc")),w=n.n(k),O=(n("8103"),function(t,e,n,a){var i=t+n<t?t+n:t,o=t+n>t?t+n:t,s=e+a<e?e+a:e,r=e+a>e?e+a:e;return{x1:i,x2:o,y1:s,y2:r}}),P={data:function(){return{page:{},graph:{},redoList:[],undoList:[],editor:null,command:null,selectedItem:null,multiSelect:!1,addGroup:!1}},created:function(){this.init(),this.bindEvent()},watch:{selectedItem:function(t){t&&t.length>1?this.addGroup=!0:this.addGroup=!1}},methods:{init:function(){var t=this.$parent,e=t.editor,n=t.command;this.editor=e,this.command=n},bindEvent:function(){var t=this,e=this;y.$on("afterAddPage",(function(t){e.page=t,e.graph=e.page.graph})),y.$on("add",(function(e){t.redoList=e.redoList,t.undoList=e.undoList})),y.$on("update",(function(e){t.redoList=e.redoList,t.undoList=e.undoList})),y.$on("delete",(function(e){t.redoList=e.redoList,t.undoList=e.undoList})),y.$on("updateItem",(function(e){t.command.executeCommand("update",[e])})),y.$on("addItem",(function(e){t.command.executeCommand("add",[e])})),y.$on("nodeselectchange",(function(){var e;t.selectedItem=t.graph.findAllByState("node","selected"),t.selectedItem=(e=t.selectedItem).concat.apply(e,Object(v["a"])(t.graph.findAllByState("edge","selected")))})),y.$on("deleteItem",(function(){t.handleDelete()})),y.$on("muliteSelectEnd",(function(){t.multiSelect=!1,t.selectedItem=t.graph.findAllByState("node","selected")}))},handleUndo:function(){this.undoList.length>0&&this.command.undo()},handleRedo:function(){this.redoList.length>0&&this.command.redo()},handleDelete:function(){this.selectedItem.length>0&&(this.command.executeCommand("delete",this.selectedItem),this.selectedItem=null)},getFormatPadding:function(){return x.a.Util.formatPadding(this.graph.get("fitViewPadding"))},getViewCenter:function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),a=e.get("height");return{x:(n-t[2]-t[3])/2+t[3],y:(a-t[0]-t[2])/2+t[0]}},handleZoomIn:function(){var t=this.graph.getZoom();this.graph.zoomTo(t+.5,this.getViewCenter())},handleZoomOut:function(){var t=this.graph.getZoom();this.graph.zoomTo(t-.5,this.getViewCenter())},handleToBack:function(){var t=this;this.selectedItem&&this.selectedItem.length>0&&this.selectedItem.forEach((function(e){e.toBack(),t.graph.paint()}))},handleToFront:function(){var t=this;this.selectedItem&&this.selectedItem.length>0&&this.selectedItem.forEach((function(e){"edge"===e.getType()||e.toFront(),t.graph.paint()}))},handleAutoZoom:function(){this.graph.fitView(20)},handleResetZoom:function(){this.graph.zoomTo(1,this.getViewCenter())},handleMuiltSelect:function(){this.multiSelect=!0,this.graph.setMode("mulitSelect")},handleAddGroup:function(){},getPosition:function(t){var e,n,a,i,o=[];t.forEach((function(t){var e=t.getBBox();o.push(O(e.x,e.y,e.width,e.height))})),o.forEach((function(t){"undefined"==typeof e&&(e=t.x1),"undefined"==typeof n&&(n=t.y1),"undefined"==typeof a&&(a=t.x2),"undefined"==typeof i&&(i=t.y2),e>t.x1&&(e=t.x1),n>t.y1&&(n=t.y1),a<t.x2&&(a=t.x2),i<t.y2&&(i=t.y2)}));var s=a-e,r=i-n,d=e+s/2,c=n+r/2,l="team"+w()(),u={id:l,width:s,height:r,x:d,y:c,shape:"teamNode"};this.command.executeCommand("add",u)},consoleData:function(){console.log(this.graph.save())}}},C=P,S=(n("8ee5"),Object(o["a"])(C,g,m,!1,null,"f47895a8",null)),I=S.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"itempannel"},[n("Item")],1)},M=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",t._l(t.list,(function(e,a){return n("li",{key:a,staticClass:"getItem",attrs:{"data-shape":e.shape,"data-type":e.type,"data-size":e.size,draggable:""},on:{dragstart:t.handleDragstart,dragend:function(n){return t.handleDragEnd(n,e)}}},[n("span",{staticClass:"pannel-type-icon",style:{background:"url("+e.image+")"}}),t._v("\n        "+t._s(e.name)+"\n    ")])})),0)},j=[],D=(n("28a5"),n("fecb")),$=n.n(D),L=n("86d5"),A=n.n(L),B=n("a1f6"),N=n.n(B),T={data:function(){return{page:null,command:null,offsetX:0,offsetY:0,list:[{name:"测试节点",label:"测试节点",size:"170*34",type:"node",x:0,y:0,shape:"customNode",color:"#1890ff",image:N.a,stateImage:$.a,inPoints:[[0,.5]],outPoints:[[1,.5]]},{name:"背景图片节点",label:"背景图片节点",size:"170*34",type:"node",x:0,y:0,shape:"customNode",color:"#1890ff",image:N.a,stateImage:$.a,backImage:A.a,inPoints:[[0,.5]],outPoints:[[1,.5]]},{name:"双输出节点",label:"双输出节点",size:"170*34",type:"node",x:0,y:0,shape:"customNode",color:"#1890ff",image:N.a,stateImage:$.a,inPoints:[[0,.5]],outPoints:[[1,.4],[1,.6]]},{name:"大型节点",label:"大型节点",size:"340*34",type:"node",x:0,y:0,shape:"customNode",color:"#1890ff",image:N.a,stateImage:$.a,inPoints:[[0,.5]],outPoints:[[1,.5]]},{name:"动画开始节点",label:"动画开始",size:"170*34",type:"node",x:0,y:0,shape:"customNode",color:"#1890ff",image:N.a,stateImage:$.a,inPoints:[[0,.5]],outPoints:[[1,.5]],isDoingStart:!0},{name:"动画结束节点",label:"动画结束",size:"170*34",type:"node",x:0,y:0,shape:"customNode",color:"#1890ff",image:N.a,stateImage:$.a,inPoints:[[0,.5]],outPoints:[[1,.5]],isDoingEnd:!0}]}},created:function(){this.bindEvent()},methods:{handleDragstart:function(t){this.offsetX=t.offsetX,this.offsetY=t.offsetY},handleDragEnd:function(t,e){var n={};if(Object.assign(n,e),n.offsetX=this.offsetX,n.offsetY=this.offsetY,this.page){var a=this.page.graph,i=a.getPointByClient(t.x,t.y);n.x=i.x,n.y=i.y,n.size=e.size.split("*"),n.type="node",this.command.executeCommand("add",[n])}},bindEvent:function(){var t=this;y.$on("afterAddPage",(function(e){t.page=e,t.command=e.command}))}}},z=T,F=(n("0228"),Object(o["a"])(z,E,j,!1,null,"03bf4ade",null)),G=F.exports,U={components:{Item:G},data:function(){return{page:null,command:null}},created:function(){this.bindEvent()},methods:{bindEvent:function(){var t=this;y.$on("afterAddPage",(function(e){t.page=e}))}}},X=U,Y=(n("6c36"),Object(o["a"])(X,_,M,!1,null,"0cac56e7",null)),Z=Y.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detailpannel"},[n("div",["node-selected"==t.status?n("div",{staticClass:"pannel",attrs:{id:"node_detailpannel"}},[n("div",{staticClass:"pannel-title"},[t._v("模型详情")]),t._v(" "),n("div",{staticClass:"block-container"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[t._v("名称")]),t._v(" "),n("el-col",{attrs:{span:16}},[n("el-input",{on:{change:t.handleChangeName},model:{value:t.node.label,callback:function(e){t.$set(t.node,"label",e)},expression:"node.label"}})],1),t._v(" "),n("el-col",{attrs:{span:8}},[t._v("任意属性")]),t._v(" "),n("el-col",{attrs:{span:16}},[n("el-input",{model:{value:t.node.xxx,callback:function(e){t.$set(t.node,"xxx",e)},expression:"node.xxx"}})],1)],1)],1)]):t._e(),t._v(" "),"canvas-selected"===t.status?n("div",{staticClass:"pannel",attrs:{id:"canvas_detailpannel"}},[n("div",{staticClass:"pannel-title"},[t._v("画布")]),t._v(" "),n("div",{staticClass:"block-container"},[n("el-checkbox",{on:{change:t.changeGridState},model:{value:t.showGrid,callback:function(e){t.showGrid=e},expression:"showGrid"}},[t._v("网格对齐")])],1)]):t._e()])])},R=[],V={data:function(){return{status:"canvas-selected",showGrid:!1,page:{},graph:{},item:{},node:{},grid:null}},created:function(){this.init(),this.bindEvent()},methods:{init:function(){},bindEvent:function(){var t=this;y.$on("afterAddPage",(function(e){t.page=e,t.graph=t.page.graph,y.$on("nodeselectchange",(function(e){!0===e.select&&"node"===e.target.getType()?(t.status="node-selected",t.item=e.target,t.node=e.target.getModel()):(t.status="canvas-selected",t.item=null,t.node=null)}))}))},handleChangeName:function(t){var e={label:t};this.graph.update(this.item,e)},changeGridState:function(t){t?(this.grid=new x.a.Grid,this.graph.addPlugin(this.grid)):this.graph.removePlugin(this.grid)}}},W=V,J=(n("2e0d"),Object(o["a"])(W,K,R,!1,null,"66ec2064",null)),H=J.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"navigator"}},[n("div",{staticClass:"pannel-title"},[t._v("导航器")]),t._v(" "),n("div",{ref:"minimap",staticClass:"minimap",attrs:{id:"minimap"}})])},Q=[],tt=(n("8e6e"),n("bd86"));function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){Object(tt["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var at={data:function(){return{minimap:null,graph:null}},created:function(){this.bindEvent()},mounted:function(){var t=this;this.$nextTick((function(){t.initMinmap()}))},methods:{initMinmap:function(){var t={container:"minimap"};this.minimap=new x.a.Minimap(nt({},t))},bindEvent:function(){var t=this;y.$on("afterAddPage",(function(e){t.graph=e.graph,t.bindPage()}))},bindPage:function(){this.minimap&&this.graph&&this.graph.addPlugin(this.minimap)}}},it=at,ot=(n("528c"),Object(o["a"])(it,q,Q,!1,null,"694bc7f8",null)),st=ot.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"graph-container",staticStyle:{position:"relative"},attrs:{id:t.pageId}})])},dt=[],ct=(n("7514"),{getEvents:function(){return{"node:mouseover":"onMouseover","node:mouseleave":"onMouseleave","node:mousedown":"onMousedown"}},onMouseover:function(t){var e=this,n=t.item,a=e.graph,i=n.getContainer();(t.target.attrs.isOutPointOut||t.target.attrs.isOutPoint)&&(i.find((function(e){(e.attrs.isInPoint||e.attrs.isOutPoint)&&e.attr("fill","#fff"),e.attrs.isOutPoint&&(e.attrs.id===t.target.attrs.parent&&i.find((function(t){t.attrs.id===e.attrs.id&&(t.attr("fill","#1890ff"),t.attr("opacity",1))})),e.attrs.id===t.target.attrs.id&&(e.attr("fill","#1890ff"),e.attr("opacity",1)))})),t.target.attr("cursor","crosshair"),this.graph.paint()),n.hasState("selected")||(e.shouldUpdate.call(e,t)&&a.setItemState(n,"hover",!0),a.paint())},onMouseleave:function(t){var e=this,n=t.item,a=e.graph,i=n.getContainer();i.find((function(t){(t.attrs.isInPoint||t.attrs.isOutPoint)&&t.attr("fill","#fff")})),e.shouldUpdate.call(e,t)&&(n.hasState("selected")||a.setItemState(n,"hover",!1)),a.paint()},onMousedown:function(t){t.target.attrs.isOutPoint||t.target.attrs.isOutPointOut?this.graph.setMode("addEdge"):this.graph.setMode("moveNode")}}),lt=null,ut=null,ht={},ft=null,pt=null,gt={getEvents:function(){return{mousemove:"onMousemove",mouseup:"onMouseup","node:mouseover":"onMouseover","node:mouseleave":"onMouseleave"}},onMouseup:function(t){var e=t.item;if(e&&"node"===e.getType()){var n=e.getContainer();if(t.target.attrs.isInPoint){var a=n.cfg.children;a.map((function(e){e.attrs.isInPointOut&&e.attrs.parent===t.target.attrs.id&&(ft=e)})),pt=t.target}else if(t.target.attrs.isInPointOut){ft=t.target;var i=n.cfg.children;i.map((function(e){e.attrs.isInPoint&&e.attrs.id===t.target.attrs.parent&&(pt=e)}))}if(ft){var o=parseInt(pt.attrs.x),s=parseInt(pt.attrs.y);if(ht={x:o,y:s},this.edge){this.graph.removeItem(this.edge);var r={id:"edge"+w()(),source:ut,target:e,sourceId:ut._cfg.id,targetId:e._cfg.id,start:lt,end:ht,shape:"customEdge",type:"edge"};y.$emit("addItem",r)}}else this.edge&&this.graph.removeItem(this.edge)}else this.edge&&this.graph.removeItem(this.edge);this.graph.find("node",(function(t){var e=t.get("group"),n=e.cfg.children;n.map((function(t){t.attrs.isInPointOut&&t.attr("opacity","0"),t.attrs.isInPoint&&t.attr("opacity","0"),t.attrs.isOutPoint&&(t.attr("opacity","0"),t.attr("fill","#fff"))}))})),ut&&this.graph.setItemState(ut,"hover",!1),this.graph.paint(),lt=null,ut=null,ht={},ft=null,pt=null,this.graph.setMode("default")},onMousemove:function(t){var e=t.item;if(lt){var n={x:t.x,y:t.y};this.edge&&this.graph.updateItem(this.edge,{target:n})}else{this.graph.find("node",(function(t){var e=t.get("group"),n=e.cfg.children;n.map((function(t){t.attrs.isInPointOut&&t.attr("opacity","0.3"),t.attrs.isInPoint&&t.attr("opacity","1")}))}));var a=parseInt(t.target.attrs.x),i=parseInt(t.target.attrs.y);lt={x:a,y:i},ut=e,this.edge=this.graph.addItem("edge",{source:e,target:e,start:lt,end:lt,type:"link-edge"})}},onMouseover:function(t){var e=t.item;e&&"node"===e.getType()&&(t.target.attrs.isInPointOut&&!this.hasTran&&(this.hasTran=!0),this.graph.paint())},onMouseleave:function(){this.graph.find("node",(function(t){var e=t.get("group"),n=e.cfg.children;n.map((function(t){t.attrs.isInPointOut&&t.resetMatrix()}))})),this.hasTran=!1,this.graph.paint()}},mt=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("2ef0"));function vt(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=yt(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function yt(t,e){if(t){if("string"===typeof t)return bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(t,e):void 0}}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){Object(tt["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wt={fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},Ot=document.body,Pt={isDrag:!1,nodeEvent:null,getDefaultCfg:function(){return{updateEdge:!0,delegate:!0,delegateStyle:{}}},getEvents:function(){return{"node:mousedown":"onMousedown",mousemove:"onMousemove",mouseup:"onMouseup","node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","canvas:mouseleave":"onOutOfRange"}},getNode:function(t){var e=this;if(this.shouldBegin.call(this,t)){this.isDrag=!0,this.nodeEvent=t;var n=t.item,a=this.graph;this.targets=[];var i=a.findAllByState("node","selected"),o=n.get("id"),s=i.filter((function(t){var e=t.get("id");return o===e}));0===s.length?this.target=n:i.length>1?i.forEach((function(t){e.targets.push(t)})):this.targets.push(n),this.origin={x:t.x,y:t.y},this.point={},this.originPoint={}}},onMousemove:function(t){this.origin||this.getNode(t),this.isDrag&&this.get("shouldUpdate").call(this,t)&&(this.targets&&this.targets.length>0?this._updateDelegate(t,this.nodeEvent):this._update(this.target,t,this.nodeEvent,!0))},onMouseup:function(t){var e=this;if(this.shape&&(this.shape.remove(),this.shape=null),this.target){var n=this.target.get("delegateShape");n&&(n.remove(),this.target.set("delegateShape",null))}if(this.targets&&this.targets.length>0)this.targets.forEach((function(n){return e._update(n,t)}));else if(this.target){var a=this.origin,i=this.target.get("model"),o=this.target.get("id");this.point[o]||(this.point[o]={x:i.x,y:i.y});var s=t.x-a.x+this.point[o].x,r=t.y-a.y+this.point[o].y,d={};d.item=this.target,d.oldModel=this.origin,d.newModel={x:s,y:r},y.$emit("updateItem",d)}this.point={},this.origin=null,this.originPoint={},this.targets&&(this.targets.length=0),this.target=null;var c=this.fn;c&&(Ot.removeEventListener("mouseup",c,!1),this.fn=null),this.isDrag=!1,this.nodeEvent=null,this.graph.setMode("default")},onOutOfRange:function(t){var e=this;if(this.origin){var n=e.graph.get("canvas").get("el"),a=function(a){a.target!==n&&e.onDragEnd(t)};this.fn=a,Ot.addEventListener("mouseup",a,!1)}},_update:function(t,e,n,a){var i=this.origin,o=t.get("model"),s=t.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var r=e.x-i.x+this.point[s].x,d=e.y-i.y+this.point[s].y;if(a)this._updateDelegate(e,n,r,d);else{var c={x:r,y:d};this.get("updateEdge")?this.graph.updateItem(t,c):(t.updatePosition(c),this.graph.paint())}},_updateDelegate:function(t,e,n,a){var i=e.item.get("keyShape").getBBox();if(!this.shape){var o=this.graph.get("group"),s=Object(mt["merge"])({},wt,this.delegateStyle);if(this.targets.length>0){var r=this.calculationGroupPosition(),d=r.x,c=r.y,l=r.width,u=r.height,h=r.minX,f=r.minY;this.originPoint={x:d,y:c,width:l,height:u,minX:h,minY:f},this.shape=o.addShape("rect",{attrs:kt({width:l,height:u,x:d,y:c},s)})}else this.target&&(this.shape=o.addShape("rect",{attrs:kt({width:i.width,height:i.height,x:n-i.width/2,y:a-i.height/2},s)}),this.target.set("delegateShape",this.shape));this.shape.set("capture",!1)}if(this.targets.length>0){var p=t.x-this.origin.x+this.originPoint.minX,g=t.y-this.origin.y+this.originPoint.minY;this.shape.attr({x:p,y:g})}else this.target&&this.shape.attr({x:n-i.width/2,y:a-i.height/2});this.graph.paint()},calculationGroupPosition:function(){var t,e=this.graph,n=e.findAllByState("node","selected"),a=[],i=[],o=[],s=[],r=vt(n);try{for(r.s();!(t=r.n()).done;){var d=t.value,c=Object(mt["isString"])(d)?e.findById(d):d,l=c.getBBox(),u=l.minX,h=l.minY,f=l.maxX,p=l.maxY;a.push(u),o.push(h),i.push(f),s.push(p)}}catch(O){r.e(O)}finally{r.f()}var g=Math.floor(Math.min.apply(Math,a)),m=Math.floor(Math.max.apply(Math,i)),v=Math.floor(Math.min.apply(Math,o)),y=Math.floor(Math.max.apply(Math,s)),b=g-20,x=v+10,k=m-g,w=y-v;return{x:b,y:x,width:k,height:w,minX:g,minY:v}}},Ct={getDefaultCfg:function(){return{multiple:!0,keyCode:16}},getEvents:function(){return{"node:click":"onClick","canvas:click":"onCanvasClick","canvas:mouseover":"onCanvasMouseover",keyup:"onKeyUp",keydown:"onKeyDown"}},onClick:function(t){var e=this,n=t.item,a=e.graph,i=a.get("autoPaint");a.setAutoPaint(!1);var o=a.findAllByState("edge","selected");if(o.forEach((function(t){a.setItemState(t,"selected",!1)})),!e.keydown||!e.multiple){var s=a.findAllByState("node","selected");s.forEach((function(t){t!==n&&a.setItemState(t,"selected",!1)}))}n.hasState("selected")?(e.shouldUpdate.call(e,t)&&a.setItemState(n,"selected",!1),y.$emit("nodeselectchange",{target:n,select:!1})):(e.shouldUpdate.call(e,t)&&a.setItemState(n,"selected",!0),y.$emit("nodeselectchange",{target:n,select:!0})),a.setAutoPaint(i),a.paint()},onCanvasClick:function(){var t=this.graph,e=t.get("autoPaint");t.setAutoPaint(!1);var n=t.findAllByState("node","selected");n.forEach((function(e){t.setItemState(e,"selected",!1),y.$emit("nodeselectchange",{target:e,select:!1})}));var a=t.findAllByState("edge","selected");a.forEach((function(e){t.setItemState(e,"selected",!1),y.$emit("nodeselectchange",{target:e,select:!1})})),t.paint(),t.setAutoPaint(e)},onCanvasMouseover:function(){var t=this.graph;t.paint()},onKeyDown:function(t){var e=t.keyCode||t.which;e===this.keyCode?this.keydown=!0:this.keydown=!1},onKeyUp:function(){this.keydown=!1}},St={getEvents:function(){return{"edge:mouseover":"onMouseover","edge:mouseleave":"onMouseleave","edge:click":"onClick"}},onMouseover:function(t){var e=this,n=t.item,a=e.graph;n.hasState("selected")||(e.shouldUpdate.call(e,t)&&a.setItemState(n,"hover",!0),a.paint())},onMouseleave:function(t){var e=this,n=t.item,a=e.graph,i=n.getContainer();i.find((function(t){(t.attrs.isInPoint||t.attrs.isOutPoint)&&t.attr("fill","#fff")})),e.shouldUpdate.call(e,t)&&(n.hasState("selected")||a.setItemState(n,"hover",!1)),a.paint()},onClick:function(t){var e=this,n=t.item,a=e.graph,i=a.get("autoPaint");a.setAutoPaint(!1);var o=a.findAllByState("node","selected");if(o.forEach((function(t){a.setItemState(t,"selected",!1)})),!e.keydown||!e.multiple){var s=a.findAllByState("edge","selected");s.forEach((function(t){t!==n&&a.setItemState(t,"selected",!1)}))}n.hasState("selected")?(e.shouldUpdate.call(e,t)&&a.setItemState(n,"selected",!1),y.$emit("nodeselectchange",{target:n,select:!1})):(e.shouldUpdate.call(e,t)&&a.setItemState(n,"selected",!0),y.$emit("nodeselectchange",{target:n,select:!0})),a.setAutoPaint(i),a.paint()}},It={getDefaultCfg:function(){return{backKeyCode:8,deleteKeyCode:46}},getEvents:function(){return{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.keyCode||t.which;switch(e){case this.deleteKeyCode:case this.backKeyCode:y.$emit("deleteItem");break}},onKeyUp:function(){this.keydown=!1}},_t={version:"0.0.1-beat",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",groupContainerClassName:"group-container",defaultNode:{shape:"circle",style:{fill:"#fff"},size:40,color:"#333"},defaultEdge:{shape:"line",style:{},size:1,color:"#333"},nodeLabel:{style:{fill:"#595959",textAlign:"center",textBaseline:"middle"},offset:5},edgeLabel:{style:{fill:"#595959",textAlign:"center",textBaseline:"middle"}},nodeStateStyle:{active:{fillOpacity:.8},selected:{lineWidth:2}},edgeStateStyle:{active:{strokeOpacity:.8},selected:{lineWidth:2}},loopPosition:"top",delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}};function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){Object(tt["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jt={getDefaultCfg:function(){return{}},getEvents:function(){return{"canvas:mouseenter":"onCanvasMouseenter","canvas:mousedown":"onCanvasMousedown",mousemove:"onMousemove",mouseup:"onMouseup"}},onCanvasMouseenter:function(){var t=document.getElementById("graph-container").children[0];t.style.cursor="crosshair"},onCanvasMousedown:function(t){var e=_t.delegateStyle,n=0,a=0,i=t.x,o=t.y,s=this.graph.get("group");this.shape=s.addShape("rect",{attrs:Et({id:"rect"+w()(),width:n,height:a,x:i,y:o},e)})},onMousemove:function(t){if(this.shape){var e=t.x-this.shape.attrs.x,n=t.y-this.shape.attrs.y;this.shape.attr({width:e,height:n}),this.graph.paint()}},onMouseup:function(){var t=this,e=document.getElementById("graph-container").children[0];e.style.cursor="default";var n=this.graph.findAllByState("node","selected");n.forEach((function(e){t.graph.setItemState(e,"selected",!1),y.$emit("nodeselectchange",{target:e,select:!1})})),this.shape&&(this.addTeam(),this.shape.remove(),this.shape=null),this.graph.paint(),y.$emit("muliteSelectEnd"),this.graph.setMode("default")},addTeam:function(){var t=this,e=this.shape.attrs,n=e.x,a=e.y,i=e.width,o=e.height,s=O(n,a,i,o),r=s.x1,d=s.y1,c=s.x2,l=s.y2;this.graph.findAll("node",(function(e){var n=e.getBBox(),a=n.x,i=n.y,o=n.width,s=n.height,u=O(a,i,o,s);c>=u.x1&&u.x1>=r&&c>=u.x2&&u.x2>=r&&l>=u.y1&&u.y1>=d&&l>=u.y2&&u.y2>=d&&t.graph.setItemState(e,"selected",!0)}))}},Dt={getEvents:function(){return{"node:contextmenu":"onContextmenu",mousedown:"onMousedown","canvas:click":"onCanvasClick"}},onContextmenu:function(t){y.$emit("contextmenuClick",t)},onMousedown:function(t){y.$emit("mousedown",t)},onCanvasClick:function(t){y.$emit("canvasClick",t)}},$t={"hover-node":ct,"add-edge":gt,"drag-item":Pt,"select-node":Ct,"hover-edge":St,keyboard:It,"mulit-select":jt,"add-menu":Dt};function Lt(){for(var t in $t)x.a.registerBehavior(t,$t[t])}var At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{ref:"contextMenu",staticClass:"el-scrollbar__view el-select-dropdown__list context-menu"},t._l(t.menus,(function(e){return n("li",{key:e.key,staticClass:"el-select-dropdown__item",on:{click:function(n){return t.handleClick(e)}}},[t._v("\n            "+t._s(e.name)+"\n        ")])})),0)])},Bt=[],Nt={data:function(){return{menus:[{key:1,name:"菜单1"},{key:2,name:"菜单2"}]}},created:function(){this.bindEvent()},methods:{init:function(){},bindEvent:function(){var t=this;y.$on("contextmenuClick",(function(e){e.preventDefault();var n=t.$refs.contextMenu;n.style.left=e.clientX+"px",n.style.top=e.clientY+"px",n.style.display="block"})),y.$on("mousedown",(function(){var e=t.$refs.contextMenu;e.style.display="none"}))},handleClick:function(t){alert(t.name);var e=this.$refs.contextMenu;e.style.display="none"}}},Tt=Nt,zt=(n("9031"),Object(o["a"])(Tt,At,Bt,!1,null,null,null)),Ft=zt.exports,Gt={data:function(){return{pageId:"graph-container",graph:null}},props:{height:{type:Number,default:0},width:{type:Number,default:0},data:{type:Object,default:function(){}}},created:function(){Lt()},mounted:function(){var t=this;this.$nextTick((function(){t.init()}))},methods:{init:function(){var t=this.height-42,e=this.width-400,n=new x.a.Menu({getContent:function(t){return console.log("graph",t),"<ul>\n            <li title='1'>测试01</li>\n            <li title='2'>测试02</li>\n            <li>测试03</li>\n            <li>测试04</li>\n            <li>测试05</li>\n          </ul>"},handleMenuClick:function(t,e){console.log(t,e)},offsetX:26,offsetY:62,itemTypes:["node","edge"]});this.graph=new x.a.Graph({container:"graph-container",height:t,width:e,plugins:[n],defaultNode:{type:"rect"},modes:{default:["drag-canvas","zoom-canvas","hover-node","select-node","hover-edge","keyboard","customer-events","add-menu"],mulitSelect:["mulit-select"],addEdge:["add-edge"],moveNode:["drag-item"]}});var a=this.$parent,i=a.editor,o=a.command;i.emit("afterAddPage",{graph:this.graph,command:o}),this.readData()},readData:function(){var t=this.data;t&&this.graph.read(t)}}},Ut=Gt,Xt=(n("4744"),Object(o["a"])(Ut,rt,dt,!1,null,"3ec28fdf",null)),Yt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},Kt=[],Rt={init:function(){x.a.registerNode("customNode",{draw:function(t,e){var n=t.size;n||(n=[170,34]);var a=parseInt(n[0]),i=parseInt(n[1]),o=t.color,s=-a/2,r=-i/2,d="rect"+w()(),c=e.addShape("rect",{attrs:{id:d,x:s,y:r,width:a,height:i,stroke:"#ced4d9",fill:"#fff",radius:4}});if(e.addShape("rect",{attrs:{x:s,y:r,width:4,height:i,fill:o,parent:d,radius:[4,0,0,4]}}),e.addShape("image",{attrs:{x:s+16,y:r+8,width:20,height:16,img:t.image,parent:d}}),e.addShape("image",{attrs:{x:s+a-32,y:r+8,width:16,height:16,parent:d,img:t.stateImage}}),t.backImage&&(e.addShape("rect",{attrs:{x:s,y:r,width:a,height:i,fill:"#fff",radius:4}}),e.addShape("image",{attrs:{x:s,y:r,width:a,height:i,img:t.backImage}})),t.label&&e.addShape("text",{attrs:{id:"label"+w()(),x:s+a/2,y:r+i/2,textAlign:"center",textBaseline:"middle",text:t.label,parent:d,fill:"#565758"}}),t.inPoints)for(var l=0;l<t.inPoints.length;l++){var u=void 0,h=0;h=0===t.inPoints[l][0]?0:i,u=a*t.inPoints[l][1];var f="circle"+w()();e.addShape("circle",{attrs:{id:"circle"+w()(),parent:f,x:u+s,y:h+r,r:10,isInPointOut:!0,fill:"#1890ff",opacity:0}}),e.addShape("circle",{attrs:{id:f,x:u+s,y:h+r,r:3,isInPoint:!0,fill:"#fff",stroke:"#1890ff",opacity:0}})}if(t.outPoints)for(var p=0;p<t.outPoints.length;p++){var g=void 0,m=0;m=0===t.outPoints[p][0]?0:i,g=a*t.outPoints[p][1];var v="circle"+w()();e.addShape("circle",{attrs:{id:"circle"+w()(),parent:v,x:g+s,y:m+r,r:10,isOutPointOut:!0,fill:"#1890ff",opacity:0}}),e.addShape("circle",{attrs:{id:v,x:g+s,y:m+r,r:3,isOutPoint:!0,fill:"#fff",stroke:"#1890ff",opacity:0}})}return c},setState:function(t,e,n){var a=n.getContainer(),i=a.get("children")[0],o=a.findAll((function(t){return t.attrs.parent===i.attrs.id})),s=a.findAll((function(t){return t.attrs.isInPoint||t.attrs.isOutPoint})),r=function(){i.attr("fill","#f3f9ff"),i.attr("stroke","#6ab7ff"),i.attr("cursor","move"),o.forEach((function(t){t.attr("cursor","move")})),s.forEach((function(t){t.attr("opacity",1)}))},d=function(){i.attr("fill","#fff"),i.attr("stroke","#ced4d9"),s.forEach((function(t){t.attr("opacity",0)}))};switch(t){case"selected":case"hover":e?r():d();break}}})}},Vt=Rt,Wt=3,Jt={init:function(){var t=[[0,1],[0,2],[1,2],[0,1,1,2],[0,2,1,2],[1,2,1,2],[2,2,1,2],[3,2,1,2],[4,2,1,2]],e=[4,2,1,2],n=9;x.a.registerEdge("customEdge",{draw:function(t,e){var n,a,i,o;"string"===typeof t.source&&(t.source=t.sourceNode),t.start||(t.start={x:0,y:17}),t.end||(t.end={x:0,y:-17}),t.source.x?i=t.source:(n=t.source.getModel(),i={x:n.x+t.start.x,y:n.y+t.start.y}),"string"===typeof t.target&&(t.target=t.targetNode),t.target.x?o=t.target:(a=t.target.getModel(),o={x:a.x+t.end.x,y:a.y+t.end.y});var s=[],r=Math.abs(o.x-i.x);s=(o.x,i.x,[["M",i.x,i.y],["C",i.x,i.y+r/(r/50),o.x,o.y-r/(r/50),o.x,o.y-4],["L",o.x,o.y]]);var d=1;d=d>Wt?d:Wt;var c=10*d/3,l=4*d/3,u=4*d,h=[["M",-c,l],["L",0,0],["L",-c,-l],["A",u,u,0,0,1,-c,l],["Z"]],f=e.addShape("path",{attrs:{id:"edge"+w()(),path:s,stroke:"#b8c3ce",lineAppendWidth:10,endArrow:{path:h}}});return f},afterDraw:function(a,i){if(a.source.getModel().isDoingStart&&a.target.getModel().isDoingEnd){for(var o=i.get("children")[0],s=o.getTotalLength(),r=[],d=0;d<s;d+=n)r=r.concat(e);var c=0;o.animate({onFrame:function(){var e={lineDash:t[c].concat(r)};return c=(c+1)%n,e},repeat:!0},3e3)}},setState:function(t,e,n){var a=n.getContainer(),i=a.get("children")[0],o=function(){i.attr("stroke","#6ab7ff")},s=function(){i.attr("stroke","#b8c3ce")};switch(t){case"selected":case"hover":e?o():s();break}}}),x.a.registerEdge("line-arrow",{draw:function(t,e){var n=t.startPoint,a=t.endPoint,i=e.addShape("path",{attrs:{stroke:"#333",path:[["M",n.x,n.y],["L",a.x,a.y]],endArrow:{path:x.a.Arrow.triangle(10,20,25),d:25}},name:"link-edge"});return i}})}},Ht=Jt,qt=(n("b167"),n("8b1b")),Qt=n.n(qt),te={init:function(){x.a.registerNode("teamNode",{draw:function(t,e){var n=10,a=20,i=t.width+2*n,o=t.height+2*n,s=-i/2,r=-o/2-a,d="rect"+w()(),c=e.addShape("rect",{attrs:{id:d,x:s,y:r,width:i,height:o+a,stroke:"#ced4d9",fill:"#f2f4f5",radius:4}});return e.addShape("text",{attrs:{id:"label"+w()(),x:s+n,y:r+n,textBaseline:"top",text:t.label||"新建分组",parent:d,fill:"#565758"}}),e.addShape("image",{attrs:{x:s+i-26,y:r+8,width:16,height:16,img:Qt.a}}),c},setState:function(t,e,n){var a=n.getContainer(),i=a.get("children")[0],o=function(){i.attr("stroke","#6ab7ff"),i.attr("cursor","move")},s=function(){i.attr("stroke","#ced4d9")};switch(t){case"selected":case"hover":e?o():s();break}}})}},ee=te,ne={name:"Flow",data:function(){return{page:null}},created:function(){this.init()},methods:{init:function(){Vt.init(),Ht.init(),ee.init()}}},ae=ne,ie=Object(o["a"])(ae,Zt,Kt,!1,null,null,null),oe=ie.exports,se=n("d225"),re=n("b0b4"),de=function(){function t(){Object(se["a"])(this,t),this.id=w()()}return Object(re["a"])(t,[{key:"getGrpah",value:function(){return this.graph}},{key:"emit",value:function(t,e){"afterAddPage"===t&&(this.graph=e.graph),y.$emit(t,e)}},{key:"on",value:function(t){switch(t){case"changeNodeData":this.graph.refresh();break}}},{key:"add",value:function(t,e){this.graph.add(t,e)}},{key:"update",value:function(t,e){this.graph.update(t,e)}},{key:"remove",value:function(t){var e=this.graph.findById(t.id);this.graph.remove(e)}}]),t}(),ce=function(){function t(e){Object(se["a"])(this,t),Object(tt["a"])(this,"editor",null),Object(tt["a"])(this,"undoList",[]),Object(tt["a"])(this,"redoList",[]),this.editor=e}return Object(re["a"])(t,[{key:"executeCommand",value:function(t,e){var n=this,a=[];e.map((function(e){var i=e;if("add"===t&&(i.id=e.type+w()()),"delete"===t)if("node"===e.getType()){var o=e.getEdges();i=e.getModel(),i.type=e.getType(),i.id=e.get("id"),o.forEach((function(t){var e=t.getModel();e.type="edge",e.id=t.get("id"),a.push(e)}))}else"edge"===e.getType()&&(i=e.getModel(),i.type=e.getType(),i.id=e.get("id"));a.push(i),n.doCommand(t,i)})),this.undoList.push({key:t,datas:a}),"delete"===t&&(this.redoList=[]),this.editor.emit(t,{undoList:this.undoList,redoList:this.redoList})}},{key:"doCommand",value:function(t,e){switch(t){case"add":this.add(e.type,e);break;case"update":this.update(e.item,e.newModel);break;case"delete":this.remove(e);break}}},{key:"add",value:function(t,e){this.editor.add(t,e)}},{key:"update",value:function(t,e){this.editor.update(t,e)}},{key:"remove",value:function(t){this.editor.remove(t)}},{key:"undo",value:function(){for(var t=this.undoList.pop(),e=[],n=[],a=0;a<t.datas.length;a++){var i=t.datas[a];"edge"!==i.type?(n.push(i),this.doundo(t.key,i)):e.push(i)}for(var o=0;o<e.length;o++){var s=e[o];s.source.destroyed&&(s.source=s.sourceId),s.target.destroyed&&(s.target=s.targetId),n.push(s),this.doundo(t.key,s)}this.redoList.push({key:t.key,datas:n}),this.editor.emit(t.key,{undoList:this.undoList,redoList:this.redoList})}},{key:"doundo",value:function(t,e){switch(t){case"add":this.remove(e);break;case"update":this.update(e.item,e.oldModel);break;case"delete":this.add(e.type,e);break}}},{key:"redo",value:function(){for(var t=this.redoList.pop(),e=[],n=[],a=0;a<t.datas.length;a++){var i=t.datas[a];"edge"!==i.type?(e.push(i),this.doredo(t.key,i)):n.push(i)}for(var o=0;o<n.length;o++){var s=n[o];s.source.destroyed&&(s.source=s.sourceId),s.target.destroyed&&(s.target=s.targetId),e.push(s),this.doredo(t.key,s)}this.undoList.push({key:t.key,datas:e}),this.editor.emit(t.key,{undoList:this.undoList,redoList:this.redoList})}},{key:"doredo",value:function(t,e){switch(t){case"add":this.add(e.type,e);break;case"update":this.update(e.item,e.newModel);break;case"delete":this.remove(e);break}}},{key:"delete",value:function(t){this.executeCommand("delete",[t])}}]),t}(),le=ce,ue={name:"G6Editor",components:{Toolbar:I,ItemPanel:Z,DetailPanel:H,Minimap:st,Page:Yt,ContextMenu:Ft,Flow:oe},props:{height:{type:Number,default:document.documentElement.clientHeight},width:{type:Number,default:document.documentElement.clientWidth},data:{type:Object,default:function(){}}},created:function(){this.init()},data:function(){return{editor:{},command:null}},methods:{init:function(){this.editor=new de,this.command=new le(this.editor)}}},he=ue,fe=(n("df74"),Object(o["a"])(he,f,p,!1,null,"9c5d9fae",null)),pe=fe.exports,ge={name:"app",components:{G6Editor:pe}},me=ge,ve=Object(o["a"])(me,u,h,!1,null,null,null),ye=ve.exports;c["default"].use(l["a"]);var be=new l["a"]({base:"/",routes:[{path:"/",name:"Editor",component:ye}]}),xe=n("5c96"),ke=n.n(xe);n("0fae");c["default"].config.productionTip=!1,c["default"].use(ke.a,{size:"mini"}),new c["default"]({router:be,render:function(t){return t(d)}}).$mount("#app")},"64a9":function(t,e,n){},"6c36":function(t,e,n){"use strict";var a=n("ab7d"),i=n.n(a);i.a},8560:function(t,e,n){},"86d5":function(t,e,n){t.exports=n.p+"static/img/bg.9a8b47e5.jpg"},"8b1b":function(t,e,n){t.exports=n.p+"static/img/close.d18d59d7.svg"},"8ee5":function(t,e,n){"use strict";var a=n("8560"),i=n.n(a);i.a},9031:function(t,e,n){"use strict";var a=n("cda8"),i=n.n(a);i.a},a1f6:function(t,e,n){t.exports=n.p+"static/img/icc.486da24a.svg"},ab7d:function(t,e,n){},b167:function(t,e,n){t.exports=n.p+"static/img/open.6dcd87be.svg"},c6d2:function(t,e,n){},cda8:function(t,e,n){},df74:function(t,e,n){"use strict";var a=n("358f"),i=n.n(a);i.a},fecb:function(t,e,n){t.exports=n.p+"static/img/ok.463ab0e4.svg"}});